generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator typescriptInterfaces {
  provider = "prisma-generator-typescript-interfaces"
}

generator pothos {
  provider     = "prisma-pothos-types"
  clientOutput = "@prisma/client"
  output       = "./pothos-types.ts"
}

generator pothosCrud {
  provider            = "prisma-generator-pothos-codegen"
  output              = "./generated/pothos" // výstup relativně k umístění tohoto schema.prisma
  clientOutput        = "../../../node_modules/.prisma/client" // volitelné, když je potřeba specifikovat klienta
  generatorConfigPath = "../../pothos.config.js"
  // optional flags podle potřeby:
  // builderPath = "@pothos/core"
  // prismaPlugin = "@pothos/plugin-prisma"
  // exportSimpleTypes = true
}

// generator docs {
//   provider = "prisma-docs-generator"
//   output   = "./prisma-docs"
// }

// generator typegraphql {
//   provider            = "typegraphql-prisma"
//   output              = "../prisma/generated/type-graphql"
//   formatGeneratedCode = "prettier"
// }

model User {
  id           Int        @id @default(autoincrement())
  firstName    String?
  lastName     String?
  picture      String?
  email        String     @unique
  catalog      Catalog[]
  /// @TypeGraphQL.omit(output: true)
  password     String?
  refreshToken String?
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  role         Role       @default(admin)
  provider     Provider[] @default([])
}

model Catalog {
  id          Int     @id @default(autoincrement())
  title       String?
  description String?
  type        String?
  author      String?
  owner       User    @relation(fields: [ownerId], references: [id])
  ownerId     Int
}

enum Role {
  admin
  user
  editor
}

enum Provider {
  google
  facebook
  github
  microsoft
}
